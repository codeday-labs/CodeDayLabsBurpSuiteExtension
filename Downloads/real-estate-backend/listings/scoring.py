CITY_POPULATION_DATA = {
    'Seattle': {'now': 750000, 'future': 1000000},
    'Spokane': {'now': 230000, 'future': 300000},
    'Tacoma': {'now': 220000, 'future': 250000},
    'Vancouver': {'now': 196000, 'future': 220000},
    'Bellevue': {'now': 151000, 'future': 180000},
    'Kent': {'now': 134000, 'future': 160000},
    'Everett': {'now': 111000, 'future': 130000},
    'Renton': {'now': 106000, 'future': 125000},
    'Spokane Valley': {'now': 103000, 'future': 120000},
    'Federal Way': {'now': 101000, 'future': 115000},
    'Yakima': {'now': 97000, 'future': 110000},
    'Kirkland': {'now': 93000, 'future': 105000},
    'Bellingham': {'now': 92000, 'future': 100000},
    'Kennewick': {'now': 84000, 'future': 95000},
    'Auburn': {'now': 82000, 'future': 90000},
    'Pasco': {'now': 77000, 'future': 85000},
    'Marysville': {'now': 72000, 'future': 80000},
    'Lakewood': {'now': 60000, 'future': 70000},
    'Redmond': {'now': 67000, 'future': 75000},
    'Shoreline': {'now': 57000, 'future': 65000},
    'Richland': {'now': 60000, 'future': 70000},
    'Olympia': {'now': 55000, 'future': 65000},
    'Lacey': {'now': 53000, 'future': 60000},
    'Edmonds': {'now': 42000, 'future': 50000},
    'Puyallup': {'now': 42000, 'future': 50000},
    'Longview': {'now': 38000, 'future': 45000},
    'Issaquah': {'now': 37000, 'future': 45000},
    'Pullman': {'now': 33000, 'future': 40000},
    'Wenatchee': {'now': 34000, 'future': 40000},
    'Mount Vernon': {'now': 35000, 'future': 40000},
    'University Place': {'now': 33000, 'future': 38000},
    'Walla Walla': {'now': 32000, 'future': 37000},
    'Bothell': {'now': 33000, 'future': 38000},
    'Sammamish': {'now': 34000, 'future': 39000},
    'Burien': {'now': 33000, 'future': 38000},
    'Des Moines': {'now': 32000, 'future': 37000},
    'Lake Stevens': {'now': 31000, 'future': 36000},
    'Bainbridge Island': {'now': 24000, 'future': 28000},
    'Tumwater': {'now': 24000, 'future': 28000},
    'Bonney Lake': {'now': 22000, 'future': 26000},
    'Maple Valley': {'now': 25000, 'future': 29000},
    'Mercer Island': {'now': 25000, 'future': 29000},
    'Camas': {'now': 24000, 'future': 28000},
    'Mukilteo': {'now': 22000, 'future': 26000},
    'Mountlake Terrace': {'now': 21000, 'future': 25000},
    'Kenmore': {'now': 22000, 'future': 26000},
    'Anacortes': {'now': 17000, 'future': 20000},
    'Bremerton': {'now': 41000, 'future': 47000},
    'Ellensburg': {'now': 18000, 'future': 21000},
    'Centralia': {'now': 18000, 'future': 21000},
    'Oak Harbor': {'now': 23000, 'future': 27000},
    'Ferndale': {'now': 15000, 'future': 18000},
    'Monroe': {'now': 18000, 'future': 21000},
    'Battle Ground': {'now': 21000, 'future': 25000},
    'Snoqualmie': {'now': 14000, 'future': 17000},
    'Enumclaw': {'now': 12000, 'future': 15000},
    'Selah': {'now': 8000, 'future': 10000},
    'Port Angeles': {'now': 19000, 'future': 22000},
    'Port Orchard': {'now': 14000, 'future': 17000},
    'Gig Harbor': {'now': 12000, 'future': 15000},
    'Chehalis': {'now': 7500, 'future': 9000},
    'Moses Lake': {'now': 25000, 'future': 30000},
    'Toppenish': {'now': 9000, 'future': 11000},
    'Sunnyside': {'now': 16000, 'future': 19000},
    'Grandview': {'now': 11000, 'future': 13000},
    'Ephrata': {'now': 8000, 'future': 10000},
    'Othello': {'now': 8000, 'future': 10000},
    'Quincy': {'now': 7000, 'future': 9000},
    'Connell': {'now': 5000, 'future': 6000},
    'Prosser': {'now': 6000, 'future': 7000},
    'Burlington': {'now': 9000, 'future': 11000},
    'Sedro-Woolley': {'now': 11000, 'future': 13000},
    'Mount Vernon': {'now': 35000, 'future': 40000},
    'Arlington': {'now': 19000, 'future': 22000},
    'Stanwood': {'now': 7000, 'future': 9000},
    'Marysville': {'now': 72000, 'future': 80000},
    'Lake Stevens': {'now': 31000, 'future': 36000},
    'Snohomish': {'now': 10000, 'future': 12000},
    'Monroe': {'now': 18000, 'future': 21000},
    'Gold Bar': {'now': 2000, 'future': 2500},
    'Sultan': {'now': 5000, 'future': 6000},
    'Granite Falls': {'now': 4000, 'future': 5000},
    'Duvall': {'now': 8000, 'future': 10000},
    'Carnation': {'now': 2000, 'future': 2500},
    'North Bend': {'now': 7000, 'future': 8500},
    'Snoqualmie': {'now': 14000, 'future': 17000},
    'Fall City': {'now': 2000, 'future': 2500},
    'Preston': {'now': 1000, 'future': 1200},
    'Issaquah': {'now': 37000, 'future': 45000},
    'Redmond': {'now': 67000, 'future': 75000},
    'Kirkland': {'now': 93000, 'future': 105000},
    'Bellevue': {'now': 151000, 'future': 180000},
    'Mercer Island': {'now': 25000, 'future': 29000},
    'Newcastle': {'now': 12000, 'future': 15000},
    'Renton': {'now': 106000, 'future': 125000},
    'SeaTac': {'now': 30000, 'future': 35000},
    'Tukwila': {'now': 20000, 'future': 25000},
    'Burien': {'now': 33000, 'future': 38000},
    'Des Moines': {'now': 32000, 'future': 37000},
    'Normandy Park': {'now': 7000, 'future': 8500},
    'Federal Way': {'now': 101000, 'future': 115000},
    'Auburn': {'now': 82000, 'future': 90000},
    'Kent': {'now': 134000, 'future': 160000},
    'Covington': {'now': 20000, 'future': 24000},
    'Maple Valley': {'now': 25000, 'future': 29000},
    'Black Diamond': {'now': 4000, 'future': 5000},
    'Enumclaw': {'now': 12000, 'future': 15000},
    'Bonney Lake': {'now': 22000, 'future': 26000},
    'Sumner': {'now': 10000, 'future': 12000},
    'Puyallup': {'now': 42000, 'future': 50000},
    'Fife': {'now': 10000, 'future': 12000},
    'Milton': {'now': 7000, 'future': 8500},
    'Edgewood': {'now': 10000, 'future': 12000},
    # Add more as needed
}

def get_population_growth_score(city):
    data = CITY_POPULATION_DATA.get(city, None)
    if not data:
        return 0.5  # default score if unknown
    growth = (data['future'] - data['now']) / data['now']
    return min(growth, 1.0)

def get_property_tax_score(tax_value):
    if not tax_value:
        return 0.5
    if tax_value < 3000:
        return 1.0
    elif tax_value < 6000:
        return 0.7
    else:
        return 0.4

def has_adu_potential(listing):
    for field in [listing.marketing_remarks, listing.agent_only_remarks]:
        if field and 'adu' in field.lower():
            return 1.0
    return 0.0